@page "/projects"
@inherits ProjectsBase
@using Microsoft.AspNetCore.Components.Web

<BasePage ShowSideNav="false">

    <Content>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Project Name</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var project in Projects)
                {
                    <tr>
                        <td>@project.Name</td>
                        <td>
                            <button @onclick="@(() => DeleteProject(project))" type="button" class="btn btn-sm btn-danger" aria-label="error">

                                <clr-icon shape="error-standard"></clr-icon>
                                Delete
                            </button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <BSButton Color="Color.Primary" OnClick="@OpenNewProjectDialog">Create New Project</BSButton>
        <BSModal @ref="NewProjectModal">
            <BSForm Model="@NewProjectModel" ValidateOnInit="true" OnValidSubmit="@OnNewProjectFormSubmit">
                <BSModalHeader OnClick="@CloseNewProjectDialog">Create new project</BSModalHeader>
                <BSModalBody>
                    <BSFormGroup>
                        <BSLabel For="ProjectName">Project Name</BSLabel>
                        <BSBasicInput InputType="InputType.Text" Id="ProjectName" @bind-Value="@NewProjectModel.ProjectName" ValidateOnChange="true"></BSBasicInput>
                        <BSFormFeedback For="@(() => NewProjectModel.ProjectName)" IsTooltip="true" ValidMessage="This is a valid project name." />
                    </BSFormGroup>
                    <DataAnnotationsValidator />
                    <ValidationSummary />
                </BSModalBody>
                <BSModalFooter>
                    <BSButton Color="Color.Primary" ButtonType="ButtonType.Submit">Create</BSButton>
                    <BSButton Color="Color.Secondary" OnClick="@CloseNewProjectDialog">Cancel</BSButton>
                </BSModalFooter>
            </BSForm>
        </BSModal>
    </Content>

    <Title>Projects</Title>

</BasePage>

@code {

}